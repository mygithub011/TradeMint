# ğŸš€ Deploy to Render - Step-by-Step Guide

## âœ… Prerequisites (Already Done!)
- âœ… Code pushed to GitHub: `https://github.com/mygithub011/smart-trade-backend`
- âœ… `render.yaml` configured in repository root
- âœ… `requirements.txt` with all dependencies
- âœ… `Procfile` for Heroku-compatible deployment
- âœ… `runtime.txt` specifying Python 3.12.10

---

## ğŸ¯ Deployment Steps (3 Minutes)

### Step 1ï¸âƒ£: Go to Render Dashboard
1. Open **https://dashboard.render.com/**
2. Sign in with your GitHub account (mygithub011)
3. Click **"New Web Service"**

### Step 2ï¸âƒ£: Connect Your Repository
1. Select **GitHub** as the source
2. Search for: **`smart-trade-backend`**
3. Click **"Connect"** next to the repository
4. Grant Render access to your repositories (one-time authorization)

### Step 3ï¸âƒ£: Configure Deployment
1. **Service Name**: `smart-trade-api` (auto-filled)
2. **Region**: `Oregon` (free tier)
3. **Branch**: `main` (auto-detected)
4. **Build Command**: `pip install -r requirements.txt`
5. **Start Command**: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`
6. **Plan**: Select **"Free"** (sufficient for MVP)

### Step 4ï¸âƒ£: Environment Variables (Auto-Detected!)
Render will automatically read from `render.yaml`:
- âœ… `SECRET_KEY` â†’ Auto-generated by Render
- âœ… `DATABASE_URL` â†’ `sqlite:///./smarttrade.db`
- âœ… `ALGORITHM` â†’ `HS256`
- âœ… `ACCESS_TOKEN_EXPIRE_MINUTES` â†’ `1440`
- âœ… `TELEGRAM_BOT_TOKEN` â†’ Leave as is (optional)

**No manual environment variable setup needed!** âœ¨

### Step 5ï¸âƒ£: Deploy!
1. Click **"Create Web Service"**
2. Watch the deployment logs (builds in ~2-3 minutes)
3. Once complete, your URL will be displayed at the top:
   ```
   https://smart-trade-api.onrender.com
   ```

---

## ğŸ‰ After Deployment

### âœ… Verify Your Backend is Running
```bash
# Test the health endpoint
curl https://smart-trade-api.onrender.com/docs

# You should see the FastAPI Swagger UI
```

### âœ… Update Your Frontend
Replace API base URL in your frontend:
```javascript
// OLD (local development)
const API_BASE = "http://localhost:8000"

// NEW (after deployment)
const API_BASE = "https://smart-trade-api.onrender.com"
```

### âœ… Test User Registration
```bash
curl -X POST "https://smart-trade-api.onrender.com/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "TestPassword123!",
    "role": "investor"
  }'
```

---

## ğŸ“Š Deployment Architecture

```
GitHub (mygithub011/smart-trade-backend)
         â†“
    Render Dashboard
         â†“
    Auto-detect render.yaml
         â†“
    pip install -r requirements.txt
         â†“
    uvicorn app.main:app --host 0.0.0.0 --port $PORT
         â†“
    https://smart-trade-api.onrender.com âœ…
```

---

## ğŸ”‘ Key Features of Your Deployment

| Feature | Value |
|---------|-------|
| **Platform** | Render (free tier) |
| **Runtime** | Python 3.12.10 |
| **Framework** | FastAPI + Uvicorn |
| **Database** | SQLite (in-container) |
| **Auto-Restart** | âœ… Yes (on crashes) |
| **Auto-Deploy** | âœ… Yes (on main branch push) |
| **CORS Enabled** | âœ… Yes (for frontend URLs) |
| **SSL/TLS** | âœ… Yes (HTTPS) |

---

## âš ï¸ Important Notes

### Database Persistence
- SQLite database is stored in the Render container
- **Data persists** as long as the service is running
- If you need permanent storage (recommended for production), upgrade to PostgreSQL:
  ```
  DATABASE_URL=postgresql://user:pass@host/dbname
  ```

### Free Tier Limitations
- Service spins down after 15 minutes of inactivity
- First request after spin-down takes ~30 seconds
- **To keep it always running**: Switch to "Pro" plan ($7/month)

### Optional: Keep Service Awake
Add this to your `requirements.txt` and create a monitoring service:
```
requests
```

---

## ğŸš¨ Troubleshooting

### âŒ Build Failed
**Check logs at**: https://dashboard.render.com/ â†’ Your Service â†’ Logs
- Make sure `requirements.txt` has all dependencies
- Verify Python 3.12.10 in `runtime.txt`

### âŒ Service Won't Start
- Check if `uvicorn app.main:app` command is correct
- Verify `app/main.py` exists and has `app = FastAPI()`
- Check environment variables in Render dashboard

### âŒ API Returns 502 Bad Gateway
- Service might still be starting (wait 1-2 minutes)
- Check Render logs for Python errors
- Verify database directory has write permissions

---

## âœ¨ Next Steps After Deployment

1. **Update Frontend URL** â†’ Point to your Render URL
2. **Test API Endpoints** â†’ Use Swagger at `/docs`
3. **Monitor Logs** â†’ Check Render dashboard for errors
4. **Add Custom Domain** (optional) â†’ https://render.com/docs/custom-domains
5. **Configure PostgreSQL** (recommended for production)

---

## ğŸ“ Need Help?

- **Render Docs**: https://render.com/docs
- **FastAPI Docs**: https://fastapi.tiangolo.com/
- **Backend Status**: Check GitHub: https://github.com/mygithub011/smart-trade-backend

---

**ğŸ¯ Your deployment is ready! Head to https://dashboard.render.com/ and click "Create Web Service" now!** ğŸš€
